#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ —Å RAG —Å–∏—Å—Ç–µ–º–æ–π
"""

from rag_system import RAGSystem

def test_qa():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã"""
    print("üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤...")
    
    # –°–æ–∑–¥–∞–µ–º RAG —Å–∏—Å—Ç–µ–º—É —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏
    rag = RAGSystem(use_mock_embeddings=False)
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã
    questions = [
        "–ß—Ç–æ —Ç–∞–∫–æ–µ –í–û–ö–ö–î–¶ –∏ –≥–¥–µ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è?",
        "–ö–∞–∫ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º?",
        "–ö–∞–∫–∏–µ —É—Å–ª—É–≥–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–Ω—Ç—Ä?",
        "–ö–∞–∫–∏–µ –µ—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã?",
        "–†–∞—Å—Å–∫–∞–∂–∏ –æ —Ü–µ–Ω—Ç—Ä–µ"
    ]
    
    for question in questions:
        print(f"\n{'='*60}")
        print(f"‚ùì –í–æ–ø—Ä–æ—Å: {question}")
        print(f"{'='*60}")
        
        response = rag.get_answer(question)
        
        print(f"üí° –û—Ç–≤–µ—Ç:")
        print(response['answer'])
        
        print(f"\nüìä –ú–µ—Ç—Ä–∏–∫–∏:")
        print(f"   –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {response['confidence']:.3f}")
        print(f"   –ò—Å—Ç–æ—á–Ω–∏–∫–æ–≤: {len(response['sources'])}")
        
        if response['sources']:
            print(f"   –õ—É—á—à–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {response['sources'][0]['score']:.3f}):")
            print(f"   {response['sources'][0]['content'][:150]}...")

if __name__ == "__main__":
    test_qa()